<?php


namespace Drupal\miniorange_oauth_client\Form;

use Drupal\Core\Form\FormStateInterface;
use Drupal\Core\Form\FormBase;
use Drupal\miniorange_oauth_client\Utilities;
class MiniorangeReports extends FormBase
{
    public function getFormId()
    {
        return "\x6d\x69\x6e\x69\x6f\162\141\x6e\x67\145\x5f\x72\145\160\x6f\x72\164\163";
    }
    public function buildForm(array $form, FormStateInterface $form_state)
    {
        $lB = FALSE;
        $form["\x6d\x61\162\x6b\165\160\x5f\154\151\142\x72\x61\x72\171"] = array("\43\x61\x74\x74\141\143\x68\145\144" => array("\154\x69\x62\162\141\162\x79" => array("\x6d\x69\156\151\157\162\141\x6e\x67\x65\x5f\157\141\x75\x74\150\x5f\x63\154\x69\x65\156\x74\x2f\155\x69\x6e\151\x6f\x72\141\x6e\147\145\137\x6f\141\x75\x74\150\x5f\x63\154\x69\x65\x6e\x74\x2e\141\x64\x6d\x69\156", "\x6d\x69\156\x69\157\162\x61\x6e\147\145\x5f\x6f\141\x75\x74\x68\x5f\143\x6c\151\145\x6e\164\57\155\x69\156\151\x6f\162\141\x6e\x67\x65\x5f\x6f\x61\165\x74\x68\x5f\143\154\151\145\156\164\56\x73\164\x79\x6c\x65\x5f\x73\x65\164\164\151\x6e\147\x73")));
        $form["\155\141\162\153\x75\160\x5f\x74\157\160"] = array("\43\x6d\141\162\x6b\x75\160" => "\x3c\x64\151\x76\40\x63\x6c\x61\163\163\75\42\x6d\157\x5f\157\141\165\x74\150\137\164\x61\142\154\145\137\x6c\141\171\157\x75\x74\x5f\x72\145\x70\x6f\162\164\x73\x22\76\x3c\x64\x69\166\x20\143\154\141\163\163\x3d\42\x6d\157\137\157\141\165\x74\150\137\x74\141\142\x6c\145\x5f\x6c\141\x79\x6f\x75\x74\x20\x6d\x6f\137\157\x61\x75\x74\x68\x5f\143\x6f\x6e\164\141\151\x6e\145\x72\x5f\162\x65\x70\x6f\162\x74\163\42\x3e");
        $form["\155\x69\156\x69\157\162\x61\x6e\x67\145\x5f\x6f\141\165\x74\x68\137\x63\154\151\145\156\164\137\x72\145\160\x6f\x72\164\137\163\165\142\155\151\x74"] = array("\43\164\171\160\x65" => "\x73\x75\142\x6d\151\164", "\x23\166\141\154\165\145" => t("\103\154\x65\141\x72\40\122\145\x70\157\162\164"), "\43\x73\165\x66\146\151\x78" => "\74\x62\x72\76\74\142\162\x3e", "\43\144\151\x73\141\142\x6c\145\x64" => $lB);
        $NW = \Drupal::database()->schema();
        if ($NW->tableExists("\x6f\x61\x75\164\150\137\x63\154\151\145\156\x74\137\163\x73\157\x5f\x72\145\160\157\162\x74")) {
            goto zv;
        }
        Utilities::creat_sso_report_table();
        zv:
        $oX = array();
        if (!($lB == FALSE)) {
            goto nG;
        }
        $XH = \Drupal::database()->select("\157\141\x75\x74\150\x5f\x63\154\151\x65\x6e\164\x5f\163\x73\x6f\x5f\x72\x65\160\157\x72\164", "\143")->fields("\143")->execute()->fetchAllAssoc("\x6e\151\x64", \PDO::FETCH_ASSOC);
        foreach ($XH as $GZ => $ag) {
            array_push($oX, array($ag["\165\x73\145\162\156\141\155\x65"], $ag["\x73\164\141\164\165\163"], $ag["\141\x70\x70\x6c\x69\143\x61\x74\151\157\156"], $ag["\144\141\x74\x65\137\x61\156\144\137\164\151\x6d\145"], $ag["\x65\155\x61\x69\154"], $ag["\151\x70\x5f\x61\x64\144\x72\145\163\163"], $ag["\x6e\141\x76\x69\x67\141\x74\151\x6f\x6e\x5f\x75\x72\x6c"]));
            bA:
        }
        XW:
        nG:
        $form["\x6d\x69\156\151\x6f\x72\x61\156\x67\145\137\x6f\141\165\164\x68\137\x63\x6c\x69\145\156\x74\x5f\162\x65\160\157\x72\x74"] = array("\x23\164\x79\x70\145" => "\x74\141\142\x6c\145", "\x23\x68\x65\x61\x64\x65\162" => array("\125\x73\145\x72\x6e\x61\155\x65", "\x53\x74\141\164\165\x73", "\101\x70\x70\x6c\x69\143\x61\164\151\157\156", "\x44\141\164\145\x20\x61\x6e\144\x20\x54\x69\x6d\x65", "\x45\x6d\x61\x69\x6c", "\x49\x50\40\x41\x64\144\162\x65\163\163", "\x4e\x61\166\151\147\x61\x74\x69\x6f\156\40\125\x52\x4c"), "\x23\x72\157\x77\x73" => $oX, "\43\162\145\163\160\157\156\x73\x69\166\145" => TRUE, "\x23\x73\x74\151\143\153\x79" => TRUE, "\43\163\165\x66\146\151\170" => "\74\57\144\x69\166\76");
        Utilities::moOAuthShowCustomerSupportIcon($form, $form_state);
        return $form;
    }
    public function submitForm(array &$form, FormStateInterface $form_state)
    {
        \Drupal::database()->delete("\x6f\x61\x75\x74\150\137\x63\154\151\x65\156\x74\x5f\x73\163\x6f\x5f\x72\145\x70\157\162\164")->execute();
        \Drupal::messenger()->addMessage(t("\125\163\145\x72\x20\x6c\157\x67\x69\156\50\123\123\117\x29\x20\162\x65\x70\157\162\164\40\x63\154\x65\x61\162\145\x64\40\163\165\143\143\x65\163\x73\x66\165\154\154\x79\x2e"));
    }
}
